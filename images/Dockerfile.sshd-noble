# ubuntu 24.04 with openssh-server installed

# Build image for arm64 with:
#   docker build -t sshd-noble-arm64 -f images/Dockerfile.sshd-noble --platform linux/arm64 .
# Build image for amd64 with:
#   docker build -t sshd-noble-amd64 -f images/Dockerfile.sshd-noble --platform linux/amd64 .

FROM ubuntu:24.04

RUN apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y openssh-server && \
    mkdir /var/run/sshd || true && \
    echo 'root:bread' | chpasswd && \
    echo "PermitRootLogin yes" >> /etc/ssh/sshd_config && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

EXPOSE 22
CMD ["/usr/sbin/sshd", "-D"]
